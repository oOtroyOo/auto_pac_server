
# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node
  # install modules
  - npm install

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  # run tests
  - npm run build
build: off
artifacts:
  - path: dist
    name: auto_pac
    type: zip
    
on_success:
  - git config --global credential.helper store
  - ps: Set-Content -Path "$HOME\.git-credentials" -Value "https://$(APPVEYOR_BUILD_VERSION):x-oauth-basic@github.com`n" -NoNewline
  - git tag $(APPVEYOR_BUILD_VERSION)
  - git push origin --tags

deploy:
  release: v$(APPVEYOR_BUILD_VERSION)
  description: 'Release'
  provider: GitHub
  auth_token:
    secure: $(GITHUB_SECURE) # your encrypted token from GitHub
  artifact: /.*\.zip/            # upload all NuGet packages to release assets
  draft: false
  prerelease: false
  on:
    branch: master                 # release from master branch only
    APPVEYOR_REPO_TAG: true        # deploy on tag push only
